# ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

## æ¦‚è¦
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’æŒã¤Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚Next.js 15ã®App Routerã¨Supabaseèªè¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã‚’ä½¿ç”¨ã€‚

## Mermaid ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```mermaid
graph TB
    %% Web Chat System - ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³
    
    subgraph "User Layer"
        Desktop["ğŸ–¥ï¸ Desktop User"]
        Mobile["ğŸ“± Mobile User"]  
        Tablet["ğŸ’» Tablet User"]
    end
    
    subgraph "Frontend Layer"
        subgraph "Browser Environment"
            subgraph "React App"
                Pages["ğŸ“„ Pages"]
                Components["ğŸ§© Components"]
                Hooks["ğŸª Hooks"]
            end
            
            subgraph "Next.js Runtime"
                AppRouter["ğŸ›£ï¸ App Router"]
                ServerComponents["âš™ï¸ Server Components"]
                ClientComponents["ğŸ’» Client Components"]
            end
            
            subgraph "UI Libraries"
                ShadcnUI["ğŸ¨ shadcn/ui"]
                TailwindCSS["ğŸ¨ Tailwind CSS"]
                LucideIcons["ğŸ¯ Lucide Icons"]
            end
        end
    end
    
    subgraph "Middleware Layer"
        subgraph "Next.js Middleware"
            SessionMgmt["ğŸ” Session Management"]
            RouteProtection["ğŸ›¡ï¸ Route Protection"]
        end
        
        subgraph "Supabase Client"
            BrowserClient["ğŸŒ Browser Client"]
            ServerClient["ğŸ–¥ï¸ Server Client"]
        end
        
        subgraph "Theme Provider"
            DarkMode["ğŸŒ™ Dark Mode"]
            SystemTheme["âš™ï¸ System Theme"]
        end
    end
    
    subgraph "Backend Layer (Supabase)"
        subgraph "Authentication"
            JWTAuth["ğŸ”‘ JWT Auth"]
            UserMgmt["ğŸ‘¤ User Management"]
            SessionStore["ğŸ’¾ Session Store"]
        end
        
        subgraph "Database"
            PostgreSQL[("ğŸ—„ï¸ PostgreSQL")]
            PostgRESTAPI["ğŸ”— PostgREST API"]
            subgraph "Database Components"
                Tables["ğŸ“Š Tables"]
                Functions["âš™ï¸ Functions"]
                Triggers["âš¡ Triggers"]
                RLSPolicies["ğŸ”’ RLS Policies"]
            end
        end
        
        subgraph "Realtime"
            WebSocketServer["ğŸ“¡ WebSocket Server"]
            PubSub["ğŸ“¢ Pub/Sub"]
            ChangeDetection["ğŸ” Change Detection"]
        end
        
        subgraph "Storage"
            FileStorage["ğŸ“ File Storage"]
            CDN["ğŸŒ CDN"]
        end
    end
    
    %% Connections
    Desktop --> Pages
    Mobile --> Pages
    Tablet --> Pages
    
    Pages --> AppRouter
    Components --> ShadcnUI
    Components --> TailwindCSS
    Components --> LucideIcons
    
    AppRouter --> SessionMgmt
    AppRouter --> RouteProtection
    
    BrowserClient --> JWTAuth
    BrowserClient --> PostgreSQL
    BrowserClient --> WebSocketServer
    
    ServerClient --> PostgreSQL
    
    JWTAuth --> UserMgmt
    PostgreSQL --> Tables
    PostgreSQL --> Functions
    PostgreSQL --> Triggers
    PostgreSQL --> RLSPolicies
    
    WebSocketServer --> PubSub
    WebSocketServer --> ChangeDetection
    
    PostgRESTAPI --> PostgreSQL
    
    %% Styling
    classDef userLayer fill:#e1f5fe
    classDef frontendLayer fill:#e8f5e8  
    classDef middlewareLayer fill:#fff9c4
    classDef backendLayer fill:#ffebee
    
    class Desktop,Mobile,Tablet userLayer
    class Pages,Components,Hooks,AppRouter,ServerComponents,ClientComponents,ShadcnUI,TailwindCSS,LucideIcons frontendLayer
    class SessionMgmt,RouteProtection,BrowserClient,ServerClient,DarkMode,SystemTheme middlewareLayer
    class JWTAuth,UserMgmt,SessionStore,PostgreSQL,PostgRESTAPI,Tables,Functions,Triggers,RLSPolicies,WebSocketServer,PubSub,ChangeDetection,FileStorage,CDN backendLayer
```

> **Note**: ã“ã®å›³è¡¨ã¯GitHubä¸Šã§è‡ªå‹•çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚  
> ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«: [`docs/archi/diagrams/system-architecture.mmd`](./diagrams/system-architecture.mmd)

## ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Web Chat System                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Frontend Layer                             â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   Auth Pages   â”‚  â”‚   Chat Pages   â”‚  â”‚   Protected    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚    Pages       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  /auth/login   â”‚  â”‚  /chat         â”‚  â”‚  /protected    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  /auth/sign-up â”‚  â”‚  /chat/[id]    â”‚  â”‚                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  /auth/forgot  â”‚  â”‚                â”‚  â”‚                â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                   Components                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ChatInterface    â”‚  â”‚ConversationsListâ”‚  â”‚DirectMessageâ”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚(å…¬é–‹ãƒãƒ£ãƒƒãƒˆ)   â”‚  â”‚(ä¼šè©±ä¸€è¦§)        â”‚  â”‚Interface    â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚AuthButton       â”‚  â”‚ThemeSwitcher    â”‚  â”‚UI Componentsâ”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚(èªè¨¼ãƒœã‚¿ãƒ³)     â”‚  â”‚(ãƒ†ãƒ¼ãƒåˆ‡æ›¿)     â”‚  â”‚(shadcn/ui)  â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Middleware Layer                           â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   Next.js      â”‚  â”‚   Supabase     â”‚  â”‚   Theme        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   Middleware   â”‚  â”‚   Middleware   â”‚  â”‚   Provider     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - ã‚»ãƒƒã‚·ãƒ§ãƒ³   â”‚  â”‚  - ã‚»ãƒƒã‚·ãƒ§ãƒ³   â”‚  â”‚  - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    ç®¡ç†        â”‚  â”‚    æ›´æ–°        â”‚  â”‚  - ã‚·ã‚¹ãƒ†ãƒ      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - ãƒ«ãƒ¼ãƒˆ      â”‚  â”‚  - Cookie      â”‚  â”‚    ãƒ†ãƒ¼ãƒ      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    ä¿è­·        â”‚  â”‚    ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° â”‚  â”‚    æ¤œå‡º        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Backend Layer                              â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                     Supabase                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚   Auth         â”‚  â”‚   Database     â”‚  â”‚   Realtime     â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  - ãƒ¦ãƒ¼ã‚¶ãƒ¼    â”‚  â”‚  - PostgreSQL  â”‚  â”‚  - WebSocket   â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    èªè¨¼        â”‚  â”‚  - PostgREST   â”‚  â”‚  - Real-time   â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  - ã‚»ãƒƒã‚·ãƒ§ãƒ³  â”‚  â”‚  - RLS         â”‚  â”‚    subscriptionâ”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    ç®¡ç†        â”‚  â”‚  - Database    â”‚  â”‚  - Postgres    â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  - JWT ãƒˆãƒ¼ã‚¯ãƒ³â”‚  â”‚    functions   â”‚  â”‚    changes     â”‚ â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Database Schema                            â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  user_profiles â”‚  â”‚  conversations â”‚  â”‚    messages    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - id (UUID)   â”‚  â”‚  - id (UUID)   â”‚  â”‚  - id (UUID)   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - email       â”‚  â”‚  - participant1â”‚  â”‚  - content     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - display_nameâ”‚  â”‚  - participant2â”‚  â”‚  - user_id     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - created_at  â”‚  â”‚  - created_at  â”‚  â”‚  - conv_id     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - updated_at  â”‚  â”‚  - updated_at  â”‚  â”‚  - created_at  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  auth.users    â”‚  â”‚  chat_rooms    â”‚  â”‚   Functions    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  (Supabase     â”‚  â”‚  (å°†æ¥æ©Ÿèƒ½)    â”‚  â”‚                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   built-in)    â”‚  â”‚                â”‚  â”‚  - get_or_     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                â”‚  â”‚  - id (UUID)   â”‚  â”‚    create_     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - id (UUID)   â”‚  â”‚  - name        â”‚  â”‚    conversationâ”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - email       â”‚  â”‚  - created_at  â”‚  â”‚  - update_     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - password    â”‚  â”‚                â”‚  â”‚    conversationâ”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - created_at  â”‚  â”‚                â”‚  â”‚    _timestamp  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Frontend
- **Next.js 15** - App Routerã€Server Componentsã€Client Components
- **React 19** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScript** - å‹å®‰å…¨æ€§
- **Tailwind CSS** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **shadcn/ui** - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **next-themes** - ãƒ†ãƒ¼ãƒåˆ‡æ›¿æ©Ÿèƒ½
- **Lucide React** - ã‚¢ã‚¤ã‚³ãƒ³

### Backend
- **Supabase** - BaaS (Backend as a Service)
  - **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ** - JWT ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹
  - **PostgreSQL** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - **PostgREST** - è‡ªå‹•ç”ŸæˆAPI
  - **Realtime** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
  - **Row Level Security (RLS)** - ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
- **Bun** - é«˜é€ŸãªJavaScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### èªè¨¼ãƒ•ãƒ­ãƒ¼
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
2. Supabase Authã§èªè¨¼å‡¦ç†
3. JWT ãƒˆãƒ¼ã‚¯ãƒ³ãŒCookieã«ä¿å­˜
4. Middlewareã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
5. ä¿è­·ã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### ãƒãƒ£ãƒƒãƒˆãƒ•ãƒ­ãƒ¼
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¼šè©±ä¸€è¦§ã‚’é–²è¦§
2. æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹ã¾ãŸã¯æ—¢å­˜ã®ä¼šè©±ã‚’é¸æŠ
3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€å—ä¿¡
4. Supabase Realtimeã§å³åº§ã«ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é…ä¿¡
5. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯PostgreSQLã«æ°¸ç¶šåŒ–

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼ãƒ»èªå¯
- Supabase Auth ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼
- Row Level Security (RLS) ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- JWT ãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- ä¼šè©±ã®å‚åŠ è€…ã®ã¿ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é–²è¦§å¯èƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®å‚åŠ ã™ã‚‹ä¼šè©±ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®æ¨©é™ãƒã‚§ãƒƒã‚¯

## ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- Server Components ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚ˆã‚‹é«˜é€Ÿã‚¯ã‚¨ãƒª
- Realtime subscriptionã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡

### æ‹¡å¼µæ€§
- ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆã«ã‚ˆã‚‹æ©Ÿèƒ½è¿½åŠ ã®å®¹æ˜“ã•
- Type-safeãªAPIè¨­è¨ˆ
- å°†æ¥ã®ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã¸ã®æ‹¡å¼µã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

## é‹ç”¨ãƒ»ç›£è¦–

### é–‹ç™ºç’°å¢ƒ
- Turbopack ã«ã‚ˆã‚‹é«˜é€Ÿãªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼
- TypeScript ã«ã‚ˆã‚‹å‹ãƒã‚§ãƒƒã‚¯
- ESLint ã«ã‚ˆã‚‹é™çš„è§£æ
- Prettier ã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### æœ¬ç•ªç’°å¢ƒ
- Next.js ã®ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–
- Supabase ã«ã‚ˆã‚‹è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- CDN ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ä¿¡æœ€é©åŒ–